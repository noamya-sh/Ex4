At this project we design a “Pokemon game” in which given a weighted graph, a set of “Agents” should be located on it so they could “catch” as many “Pokemons” as possible. The pokemons are located on the graph’s (directed) edges, therefore, the agent needs to take (aka walk) the proper edge to “grab” the pokemon.
The game is run in the form of a client and server. The server keeps the data and updates it all the time, and the client actually 'creates' the agents (based on information from the server) and places them in the desired places and then constantly updates what the next step they need to do.
To execute the program, we created several classes, some secondary and some central - the secondary classes are 'pokemon', 'agent' designed to create a 'pokemon' or 'agent what json object the server gives', and an 'edgepoke' class that we use to know how much The values ​​of the Pokemon that are on a particular edge and whether we have already assigned an agent to it.
The main classes are 'Controller' and 'Gui', where 'Controller' is the main calculation of the agents' locations and their next step as well as giving the command when to move them. The role of the 'Gui' class is to draw the graph with the Pokemon and agents and to simulate the movement of the agents, the capture of the Pokemon and their reappearance in another location.
Controller class:
In this class we first built a basic build of the game, made a connection to the server and then kept the data with us - we got the data on Pokemon locations and value, and plotted by edge how many 'Pokemon' values ​​there are on it, then sorted by values ​​(from high to low).
We then add agents (the amount given in json given by the server) and place them according to the sorted array of the edges on which the Pokemon are located. If there are more agents left place them randomly.
We keep a list of each agent's his path so we can always know what his next step is. First we will list the source of the edge to which it is embedded.
In the 'get_next' function we return the next node to which the agent has to go according to the data that appears in his path.
In the 'on_edge' function we calculate according to the position of the Pokemon on which edge it is located.
In the 'attach' function we sort the edgepoke according to their value, and the agents according to their speed and then insert each suitable edge agent so that the fastest agent gets the edge with the highest value. After we have assigned an agent to each edge we update the agent's its trajectory by adding the 'shortestpath' between the agent's location and the source of the edge. We will also indicate that this edge has already been assigned an agent.
In the 'moving' function we basically schedule when the agents will perform 'movement'. We check if the agent's distance from the Pokemon is close enough for him to 'capture' him in the same 'movement', and we also inform the server what the next step the agent should do. At the end we make sure that the amount of 'moves' does not exceed the required limit of an average of 10 'moves' per second.
Note that in order to create a graph and execute algorithms on it, we used the 'networkx' library.
In the 'Gui' class we implemented the graphical interface of the game. We used 'pygame' for that.
We initialized a Controller variable and from it we got the data on the graph, the Pokemon and the agents. We drew the nodes and edges as well as the Pokemon and agents (Pikachu if the dest of the edge is larger than the source, and otherwise 'Squirtle'. 'Pokeball' represents the agents.)
Also appear on the screen the time left for the game, the score and the amount of 'moves' made. There is also a 'stop' button where you can stop the game at any given moment.
During the game run we constantly re-insert the agents (by the 'attach' function) and perform 'moves' taking into account the time left for the game.
Run the program-
In order to run the program, the following command must be entered in the command line-
'java -jar Ex4_Server_v0.0.jar 0' (where the last digit represents which 'case' you want to run, there are 16 cases). After giving the command, one should run the Ex4.py file and then the game will start running.
